---
import Image from "astro/components/Image.astro";

export interface Props {
  post: {
    data: {
      title: string;
      description: string;
      heroImage?: string;
      github?: string;
      playstore?: string;
      category?: string;
      tags?: string[];
    };
    id: string;
  };
  category: string;
}

const { post, category } = Astro.props;
---

<div
  class="bg-bg-card/70 backdrop-blur-lg dark:bg-bg-card-dark/70 p-4 sm:p-6 md:p-8 rounded-xl shadow-lg hover:shadow-xl hover:opacity-95 hover:border-accent/50 w-full max-w-4xl group flex items-start gap-6"
>
  {
    post.data.heroImage && (
      <Image
        width={80}
        height={80}
        class="rounded-lg hidden md:block w-20 h-20 object-cover flex-shrink-0"
        src={post.data.heroImage}
        alt={post.data.title}
        loading="lazy"
      />
    )
  }
  <div class="flex-1">
    <div class="flex justify-between items-center mb-3">
      <h2
        class="text-xl md:text-2xl font-semibold m-0 text-text-heading group-hover:text-accent transition-colors"
      >
        <span class="inline-flex items-center gap-2">
          <a
            rel="prefetch"
            data-astro-prefetch
            href={`/${category}/${post.id}`}
            class="text-text-heading dark:text-text-heading-dark hover:text-accent no-underline"
          >
            {post.data.title}
          </a>
          {
            post.data.category && (
              <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-accent/10 text-accent border border-accent/20">
                {post.data.category}
              </span>
            )
          }
        </span>
      </h2>
      {
        post.data.github && (
          <a
            href={`https://github.com/${post.data.github}`}
            target="_blank"
            rel="noopener noreferrer"
            class="flex gap-2 opacity-70 hover:opacity-100 transition-opacity"
          >
            <img
              src={`https://img.shields.io/github/stars/${post.data.github}?style=social&theme=dark`}
              alt="GitHub stars"
            />
          </a>
        )
      }
    </div>

    {
      post.data.playstore && (
        <div class="mb-3">
          <a
            href={`https://play.google.com/store/apps/details?id=${post.data.playstore}`}
            class="inline-block"
          >
            <img
              src="https://img.shields.io/badge/play%20store-available-green"
              alt="Available on Play Store"
            />
          </a>
        </div>
      )
    }

    <p class="mb-3 leading-relaxed">
      {post.data.description}
    </p>

    <div class="flex flex-wrap gap-3 items-center">
      {
        post.data.tags && post.data.tags.length > 0 && (
          <div class="flex flex-wrap gap-1">
            {post.data.tags.map((tech) => (
              <span class="inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-text-secondary/10 border border-text-secondary/20">
                {tech}
              </span>
            ))}
          </div>
        )
      }
    </div>
  </div>
</div>
